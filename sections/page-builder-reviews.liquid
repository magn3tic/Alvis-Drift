<section class="ald-testimonials">
  <div class="alcontainer">
    <div class="head">
      {% if section.settings.small_heading != blank %}
        <div class="heading-small">{{ section.settings.small_heading }}</div>
      {% endif %}
      {% if section.settings.heading != blank %}
        <h3 class="heading">{{ section.settings.heading }}</h3>
      {% endif %}
      {% if section.settings.cta_text != blank and section.settings.cta_link != blank %}
        <a href="{{ section.settings.cta_link }}" class="cta-btn-border">{{ section.settings.cta_text }}</a>
      {% endif %}
    </div>

    <div class="ts-slider-wrap">
      <div class="ts-slider">
        {% for block in section.blocks %}
          <div class="slide">
            <div class="ts-item">
              {% assign product = all_products[block.settings.product_handle] %}
              {% if product %}
                <div class="ts-product">
                <a href="{{ product.url }}">
                  {{ product.featured_image | image_url: width: 400 | image_tag: alt: product.title }}
                </a>
                </div>
              {% endif %}              

              <svg xmlns="http://www.w3.org/2000/svg" width="84" height="60" viewBox="0 0 84 60" fill="none">
                <path d="M20.8286 0L30.5469 7.33625C23.4551 15.4585 18.99 23.5808 16.8887 31.7031C24.7684 31.7031 31.0722 38.2533 31.0722 46.1135C31.0722 53.4498 25.0311 60 16.626 60C6.64502 60 0.603882 51.0917 0.603882 39.0393C0.603882 28.559 5.06907 19.6507 20.8286 0ZM73.3602 0L83.0786 7.33625C75.9868 15.4585 71.5216 23.5808 69.4203 31.7031C77.3001 31.7031 83.6039 38.2533 83.6039 46.1135C83.6039 53.4498 77.5627 60 69.1577 60C59.1767 60 53.1355 51.0917 53.1355 39.0393C53.1355 28.559 57.6007 19.6507 73.3602 0Z" fill="#E4DECD"/>
              </svg>

              {% if block.settings.review_text != blank %}
                <p>{{ block.settings.review_text }}</p>
              {% endif %}

              <img src="https://cdn.shopify.com/s/files/1/0608/0505/4720/files/stars.svg" alt="Stars" />

              {% if block.settings.author != blank %}
                <div class="ts-author">{{ block.settings.author }}</div>
              {% endif %}
            </div>
          </div>
        {% endfor %}
      </div>

      {% if section.settings.show_nav %}
        <div class="ts-slide-nav">
          <div class="ts-slide-nav-prev">
            <svg width="31" height="31" viewBox="0 0 31 31" fill="none" xmlns="http://www.w3.org/2000/svg">
              <circle cx="15.5" cy="15.5" r="14.5" stroke="#C2AB9B" stroke-width="2"/>
              <path d="M19.5 20.9L10.8 15.8L19.5 10.8" stroke="#C2AB9B" stroke-width="2" stroke-linecap="round"/>
            </svg>
          </div>
          <div class="ts-slide-nav-next">
            <svg width="31" height="31" viewBox="0 0 31 31" fill="none" xmlns="http://www.w3.org/2000/svg">
              <circle cx="15.5" cy="15.5" r="14.5" stroke="#C2AB9B" stroke-width="2"/>
              <path d="M12.1 20.9L20.9 15.8L12.1 10.8" stroke="#C2AB9B" stroke-width="2" stroke-linecap="round"/>
            </svg>
          </div>
        </div>
      {% endif %}
    </div>
  </div>
</section>

{% schema %}
{
  "name": "New Testimonials",
  "settings": [
    {
      "type": "text",
      "id": "small_heading",
      "label": "Small Heading",
      "default": "Testimonials"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Main Heading",
      "default": "Why we are loved"
    },
    {
      "type": "text",
      "id": "cta_text",
      "label": "CTA Button Text",
      "default": "View All"
    },
    {
      "type": "url",
      "id": "cta_link",
      "label": "CTA Button Link"
    },
    {
      "type": "checkbox",
      "id": "show_nav",
      "label": "Show Navigation Arrows",
      "default": true
    }
  ],
  "blocks": [
    {
      "type": "testimonial",
      "name": "Testimonial Item",
      "settings": [
        {
          "type": "product",
          "id": "product_handle",
          "label": "Select Product"
        },     
        {
          "type": "textarea",
          "id": "review_text",
          "label": "Review Text",
          "default": "WOW. Beautiful, absolutely beautiful, I didn't want the bottle to end."
        },
        {
          "type": "text",
          "id": "author",
          "label": "Reviewer Name",
          "default": "Louise Orrick"
        }
      ]
    }
  ],
  "max_blocks": 10,
  "presets": [
    {
      "name": "New Testimonials",
      "category": "Content",
      "blocks": [
        { "type": "testimonial" },
        { "type": "testimonial" },
        { "type": "testimonial" }
      ]
    }
  ]
}
{% endschema %}